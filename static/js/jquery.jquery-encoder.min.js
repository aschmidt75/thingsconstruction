/*! jQuery Encoder Plugin - v0.1.1 - 2015-08-19
* https://github.com/chrisisbeef/jquery-encoder
* Copyright (c) 2015 Chris Schmidt; Licensed MIT */
!function(a){var b={js:[",",".","_"," "]},c={"default":[",",".","-","_"," "]},d={width:["%"],height:["%"]},e={"default":["-"," ","%"],color:["#"," ","(",")"],image:["(",")",":","/","?","&","-",".",'"',"="," "]},f={background:["(",")",":","%","/","?","&","-"," ",".",'"',"=","#"],"background-image":e.image,"background-color":e.color,"border-color":e.color,"border-image":e.image,color:e.color,icon:e.image,"list-style-image":e.image,"outline-color":e.color},g={attr_name:["on[a-z]{1,}","style","href","src"],attr_val:["javascript:"],css_key:["behavior","-moz-behavior","-ms-behavior"],css_val:["expression"]},h={blacklist:!0},i=!1;a.encoder={author:"Chris Schmidt (chris.schmidt@owasp.org)",version:"${project.version}",init:function(b){if(i)throw"jQuery Encoder has already been initialized - cannot set options after initialization";i=!0,a.extend(h,b)},encodeForHTML:function(b){i=!0;var c=document.createElement("div");return a(c).text(b),a(c).html()},encodeForHTMLAttribute:function(b,e,f){var h;i=!0,b=a.encoder.canonicalize(b).toLowerCase(),e=a.encoder.canonicalize(e);for(var j=0;j<g.attr_name.length;j++)if(b.toLowerCase().match(g.attr_name[j]))throw"Unsafe attribute name used: "+b;for(var k=0;k<g.attr_val.length;k++)if(e.toLowerCase().match(g.attr_val[k]))throw"Unsafe attribute value used: "+e;h=d[b],h||(h=c["default"]);var l="";if(!f){for(var m=0;m<b.length;m++){var n=b.charAt(m);if(!n.match(/[a-zA-Z\-0-9]/))throw"Invalid attribute name specified";l+=n}l+='="'}for(var j=0;j<e.length;j++){var o=e.charAt(j),p=e.charCodeAt(j);if(!o.match(/[a-zA-Z0-9\uD800-\uDBFF\uDC00-\uDFFF]/)&&a.inArray(o,h)<0){var q=p.toString(16);l+="&#x"+q+";"}else l+=o}return f||(l+='"'),l},encodeForCSS:function(b,c,d){var h;if(i=!0,b=a.encoder.canonicalize(b).toLowerCase(),c=a.encoder.canonicalize(c),a.inArray(b,g.css_key)>=0)throw"Unsafe property name used: "+b;for(var j=0;j<g.css_val.length;j++)if(c.toLowerCase().indexOf(g.css_val[j])>=0)throw"Unsafe property value used: "+c;h=f[b],h||(h=e["default"]);var k="";if(!d){for(var l=0;l<b.length;l++){var m=b.charAt(l);if(!m.match(/[a-zA-Z\-]/))throw"Invalid Property Name specified";k+=m}k+=": "}for(var n=0;n<c.length;n++){var o=c.charAt(n),p=c.charCodeAt(n);if(!o.match(/[a-zA-Z0-9]/)&&a.inArray(o,h)<0){var q=p.toString(16),r="000000".substr(q.length);k+="\\"+r+q}else k+=o}return k},encodeForURL:function(b,c){i=!0;var d="";if(c){if(!c.match(/^[A-Za-z\-0-9]{1,}$/))throw"Illegal Attribute Name Specified";d+=a.encoder.canonicalize(c).toLowerCase(),d+='="'}return d+=encodeURIComponent(b),d+=c?'"':""},encodeForJavascript:function(c){var d=b.js;i=!0;for(var e="",f=0;f<c.length;f++){var g=c.charAt(f),h=c.charCodeAt(f);if(a.inArray(g,d)>=0||null==j[h])e+=g;else{var k,l=h.toString(16);256>h?(k="00".substr(l.length),e+="\\x"+k+l.toUpperCase()):(k="0000".substr(l.length),e+="\\u"+k+l.toUpperCase())}}return e},canonicalize:function(a,b){if(i=!0,null===a)return null;for(var c=a,d=a,e=0,f=0,g=[new o,new p,new q];;){d=c;for(var h=0;h<g.length;h++){var j=g[h].decode(c);j!=c&&(e++,c=j)}if(d==c)break;f++}if(b&&e>1)throw"Attack Detected - Multiple/Double Encodings used in input";return c}};for(var j=[],k=0;255>k;k++)k>=48&&57>=k||k>=65&&90>=k||k>=97&&122>=k?j[k]=null:j[k]=k.toString(16);var l={html:function(b){return a.encoder.encodeForHTML(b.unsafe)},css:function(b){var c=[],d=[];b.map?c=b.map:c[b.name]=b.unsafe;for(var e in c)"function"!=typeof c[e]&&c.hasOwnProperty(e)&&(d[e]=a.encoder.encodeForCSS(e,c[e],!0));return d},attr:function(b){var c=[],d=[];b.map?c=b.map:c[b.name]=b.unsafe;for(var e in c)"function"!=typeof c[e]&&c.hasOwnProperty(e)&&(d[e]=a.encoder.encodeForHTMLAttribute(e,c[e],!0));return d}};a.fn.encode=function(){i=!0;var b=arguments.length,c={context:"html",unsafe:null,name:null,map:null,setter:null,strict:!0};1==b&&"object"==typeof arguments[0]?a.extend(c,arguments[0]):(c.context=arguments[0],2==arguments.length?"html"==c.context?c.unsafe=arguments[1]:("attr"==c.content||"css"==c.content)&&(c.map=arguments[1]):(c.name=arguments[1],c.unsafe=arguments[2])),"html"==c.context?c.setter=this.html:"css"==c.context?c.setter=this.css:"attr"==c.context&&(c.setter=this.attr);var d=l[c.context].call(this,c);if("object"==typeof d){for(key in d)c.setter.call(this,key,d[key]);return this}return c.setter.call(this,d)};var m=Class.extend({_input:null,_pushback:null,_temp:null,_index:0,_mark:0,_hasNext:function(){return null==this._input?!1:0==this._input.length?!1:this._index<this._input.length},init:function(a){this._input=a},pushback:function(a){this._pushback=a},index:function(){return this._index},hasNext:function(){return null!=this._pushback?!0:this._hasNext()},next:function(){if(null!=this._pushback){var a=this._pushback;return this._pushback=null,a}return this._hasNext()?this._input.charAt(this._index++):null},nextHex:function(){var a=this.next();return null==a?null:a.match(/[0-9A-Fa-f]/)?a:null},peek:function(a){return a?this._pushback&&this._pushback==a?!0:this._hasNext()?this._input.charAt(this._index)==a:!1:this._pushback?this._pushback:this._hasNext()?this._input.charAt(this._index):null},mark:function(){this._temp=this._pushback,this._mark=this._index},reset:function(){this._pushback=this._temp,this._index=this._mark},remainder:function(){var a=this._input.substr(this._index);return null!=this._pushback&&(a=this._pushback+a),a}}),n=Class.extend({decode:function(a){for(var b="",c=new m(a);c.hasNext();){var d=this.decodeCharacter(c);b+=null!=d?d:c.next()}return b},decodeCharacter:function(a){return a.next()}}),o=n.extend({decodeCharacter:function(a){a.mark();var b=a.next();if(null==b||"&"!=b)return a.reset(),null;var c=a.next();if(null==c)return a.reset(),null;var d;if("#"==c){if(d=this._getNumericEntity(a),null!=d)return d}else if(c.match(/[A-Za-z]/)&&(a.pushback(c),d=this._getNamedEntity(a),null!=d))return d;return a.reset(),null},_getNamedEntity:function(a){var b,c,d="";c=Math.min(a.remainder().length,w.getMaxKeyLength());for(var e=0;c>e;e++)d+=a.next().toLowerCase();if(b=w.getLongestMatch(d),null==b)return null;a.reset(),a.next(),c=b.getKey().length;for(var f=0;c>f;f++)a.next();return a.peek(";")&&a.next(),b.getValue()},_getNumericEntity:function(a){var b=a.peek();return null==b?null:"x"==b||"X"==b?(a.next(),this._parseHex(a)):this._parseNumber(a)},_parseHex:function(a){for(var b="";a.hasNext();){var c=a.peek();if(isNaN(parseInt(c,16))){if(";"==c){a.next();break}break}b+=c,a.next()}var d=parseInt(b,16);return!isNaN(d)&&s(d)?String.fromCharCode(d):null},_parseNumber:function(a){for(var b="";a.hasNext();){var c=a.peek();if(isNaN(parseInt(c,10))){if(";"==c){a.next();break}break}b+=c,a.next()}var d=parseInt(b,10);return!isNaN(d)&&s(d)?String.fromCharCode(d):null}}),p=n.extend({decodeCharacter:function(a){a.mark();var b=a.next();if(null==b)return a.reset(),null;if("%"!=b)return a.reset(),null;for(var c="",d=0;2>d;d++){var e=a.nextHex();null!=e&&(c+=e)}if(2==c.length){var f=parseInt(c,16);if(s(f))return String.fromCharCode(f)}return a.reset(),null}}),q=n.extend({decodeCharacter:function(a){a.mark();var b=a.next();if(null==b||"\\"!=b)return a.reset(),null;var c=a.next();if(null==c)return a.reset(),null;switch(c){case"\r":a.peek("\n")&&a.next();case"\n":case"\f":case"\x00":return this.decodeCharacter(a)}if("NaN"==parseInt(c,16))return c;for(var d=c,e=0;5>e;e++){var f=a.next();if(null==f||t(f))break;if("NaN"==parseInt(f,16)){a.pushback(f);break}d+=f}var g=parseInt(d,16);return s(g)?String.fromCharCode(g):"ï¿½"}}),r=Class.extend({root:null,maxKeyLen:0,size:0,init:function(){this.clear()},getLongestMatch:function(a){return null==this.root&&null==a?null:this.root.getLongestMatch(a,0)},getMaxKeyLength:function(){return this.maxKeyLen},clear:function(){this.root=null,this.maxKeyLen=0,this.size=0},put:function(a,b){var c,d;return null==this.root&&(this.root=new r.Node),null!=(d=this.root.put(a,0,b))?d:((c=a.length)>this.maxKeyLen&&(this.maxKeyLen=a.length),this.size++,null)}});r.Entry=Class.extend({_key:null,_value:null,init:function(a,b){this._key=a,this._value=b},getKey:function(){return this._key},getValue:function(){return this._value},equals:function(a){return a instanceof r.Entry?this._key==a._key&&this._value==a._value:!1}}),r.Node=Class.extend({_value:null,_nextMap:null,setValue:function(a){this._value=a},getNextNode:function(a){return this._nextMap?this._nextMap[a]:null},put:function(a,b,c){var d,e,f;return a.length==b?(f=this._value,this.setValue(c),f):(e=a.charAt(b),null==this._nextMap?(this._nextMap=r.Node.newNodeMap(),d=new r.Node,this._nextMap[e]=d):null==(d=this._nextMap[e])&&(d=new r.Node,this._nextMap[e]=d),d.put(a,b+1,c))},get:function(a,b){var c;return a.length<=b?this._value:null==(c=this.getNextNode(a.charAt(b)))?null:c.get(a,b+1)},getLongestMatch:function(a,b){var c,d;return a.length<=b?r.Entry.newInstanceIfNeeded(a,this._value):null==(c=this.getNextNode(a.charAt(b)))?r.Entry.newInstanceIfNeeded(a,b,this._value):null!=(d=c.getLongestMatch(a,b+1))?d:r.Entry.newInstanceIfNeeded(a,b,this._value)}}),r.Entry.newInstanceIfNeeded=function(){var a,b,c=arguments[0];return"string"==typeof arguments[1]?(a=arguments[1],b=c.length):(b=arguments[1],a=arguments[2]),null==a||null==c?null:(c.length>b&&(c=c.substr(0,b)),new r.Entry(c,a))},r.Node.newNodeMap=function(){return{}};var s=function(a){return a>=0&&1114111>=a},t=function(a){return a.match(/[\s]/)},u=[],v=[],w=new r;!function(){u["&quot"]="34",u["&amp"]="38",u["&lt"]="60",u["&gt"]="62",u["&nbsp"]="160",u["&iexcl"]="161",u["&cent"]="162",u["&pound"]="163",u["&curren"]="164",u["&yen"]="165",u["&brvbar"]="166",u["&sect"]="167",u["&uml"]="168",u["&copy"]="169",u["&ordf"]="170",u["&laquo"]="171",u["&not"]="172",u["&shy"]="173",u["&reg"]="174",u["&macr"]="175",u["&deg"]="176",u["&plusmn"]="177",u["&sup2"]="178",u["&sup3"]="179",u["&acute"]="180",u["&micro"]="181",u["&para"]="182",u["&middot"]="183",u["&cedil"]="184",u["&sup1"]="185",u["&ordm"]="186",u["&raquo"]="187",u["&frac14"]="188",u["&frac12"]="189",u["&frac34"]="190",u["&iquest"]="191",u["&Agrave"]="192",u["&Aacute"]="193",u["&Acirc"]="194",u["&Atilde"]="195",u["&Auml"]="196",u["&Aring"]="197",u["&AElig"]="198",u["&Ccedil"]="199",u["&Egrave"]="200",u["&Eacute"]="201",u["&Ecirc"]="202",u["&Euml"]="203",u["&Igrave"]="204",u["&Iacute"]="205",u["&Icirc"]="206",u["&Iuml"]="207",u["&ETH"]="208",u["&Ntilde"]="209",u["&Ograve"]="210",u["&Oacute"]="211",u["&Ocirc"]="212",u["&Otilde"]="213",u["&Ouml"]="214",u["&times"]="215",u["&Oslash"]="216",u["&Ugrave"]="217",u["&Uacute"]="218",u["&Ucirc"]="219",u["&Uuml"]="220",u["&Yacute"]="221",u["&THORN"]="222",u["&szlig"]="223",u["&agrave"]="224",u["&aacute"]="225",u["&acirc"]="226",u["&atilde"]="227",u["&auml"]="228",u["&aring"]="229",u["&aelig"]="230",u["&ccedil"]="231",u["&egrave"]="232",u["&eacute"]="233",u["&ecirc"]="234",u["&euml"]="235",u["&igrave"]="236",u["&iacute"]="237",u["&icirc"]="238",u["&iuml"]="239",u["&eth"]="240",u["&ntilde"]="241",u["&ograve"]="242",u["&oacute"]="243",u["&ocirc"]="244",u["&otilde"]="245",u["&ouml"]="246",u["&divide"]="247",u["&oslash"]="248",u["&ugrave"]="249",u["&uacute"]="250",u["&ucirc"]="251",u["&uuml"]="252",u["&yacute"]="253",u["&thorn"]="254",u["&yuml"]="255",u["&OElig"]="338",u["&oelig"]="339",u["&Scaron"]="352",u["&scaron"]="353",u["&Yuml"]="376",u["&fnof"]="402",u["&circ"]="710",u["&tilde"]="732",u["&Alpha"]="913",u["&Beta"]="914",u["&Gamma"]="915",u["&Delta"]="916",u["&Epsilon"]="917",u["&Zeta"]="918",u["&Eta"]="919",u["&Theta"]="920",u["&Iota"]="921",u["&Kappa"]="922",u["&Lambda"]="923",u["&Mu"]="924",u["&Nu"]="925",u["&Xi"]="926",u["&Omicron"]="927",u["&Pi"]="928",u["&Rho"]="929",u["&Sigma"]="931",u["&Tau"]="932",u["&Upsilon"]="933",u["&Phi"]="934",u["&Chi"]="935",u["&Psi"]="936",u["&Omega"]="937",u["&alpha"]="945",u["&beta"]="946",u["&gamma"]="947",u["&delta"]="948",u["&epsilon"]="949",u["&zeta"]="950",u["&eta"]="951",u["&theta"]="952",u["&iota"]="953",u["&kappa"]="954",u["&lambda"]="955",u["&mu"]="956",u["&nu"]="957",u["&xi"]="958",u["&omicron"]="959",u["&pi"]="960",u["&rho"]="961",u["&sigmaf"]="962",u["&sigma"]="963",u["&tau"]="964",u["&upsilon"]="965",u["&phi"]="966",u["&chi"]="967",u["&psi"]="968",u["&omega"]="969",u["&thetasym"]="977",u["&upsih"]="978",u["&piv"]="982",u["&ensp"]="8194",u["&emsp"]="8195",u["&thinsp"]="8201",u["&zwnj"]="8204",u["&zwj"]="8205",u["&lrm"]="8206",u["&rlm"]="8207",u["&ndash"]="8211",u["&mdash"]="8212",u["&lsquo"]="8216",u["&rsquo"]="8217",u["&sbquo"]="8218",u["&ldquo"]="8220",u["&rdquo"]="8221",u["&bdquo"]="8222",u["&dagger"]="8224",u["&Dagger"]="8225",u["&bull"]="8226",u["&hellip"]="8230",u["&permil"]="8240",u["&prime"]="8242",u["&Prime"]="8243",u["&lsaquo"]="8249",u["&rsaquo"]="8250",u["&oline"]="8254",u["&frasl"]="8260",u["&euro"]="8364",u["&image"]="8365",u["&weierp"]="8472",u["&real"]="8476",u["&trade"]="8482",u["&alefsym"]="8501",u["&larr"]="8592",u["&uarr"]="8593",u["&rarr"]="8594",u["&darr"]="8595",u["&harr"]="8596",u["&crarr"]="8629",u["&lArr"]="8656",u["&uArr"]="8657",u["&rArr"]="8658",u["&dArr"]="8659",u["&hArr"]="8660",u["&forall"]="8704",u["&part"]="8706",u["&exist"]="8707",u["&empty"]="8709",u["&nabla"]="8711",u["&isin"]="8712",u["&notin"]="8713",u["&ni"]="8715",u["&prod"]="8719",u["&sum"]="8721",u["&minus"]="8722",u["&lowast"]="8727",u["&radic"]="8730",u["&prop"]="8733",u["&infin"]="8734",u["&ang"]="8736",u["&and"]="8743",u["&or"]="8744",u["&cap"]="8745",u["&cup"]="8746",u["&int"]="8747",u["&there4"]="8756",u["&sim"]="8764",u["&cong"]="8773",u["&asymp"]="8776",u["&ne"]="8800",u["&equiv"]="8801",u["&le"]="8804",u["&ge"]="8805",u["&sub"]="8834",u["&sup"]="8835",u["&nsub"]="8836",u["&sube"]="8838",u["&supe"]="8839",u["&oplus"]="8853",u["&otimes"]="8855",u["&perp"]="8869",u["&sdot"]="8901",u["&lceil"]="8968",u["&rceil"]="8969",u["&lfloor"]="8970",u["&rfloor"]="8971",u["&lang"]="9001",u["&rang"]="9002",u["&loz"]="9674",u["&spades"]="9824",u["&clubs"]="9827",u["&hearts"]="9829",u["&diams"]="9830";for(var a in u)"function"!=typeof u[a]&&u.hasOwnProperty(a)&&(v[u[a]]=a);for(var b in v)if("function"!=typeof v[b]&&v.hasOwnProperty(b)){var c=v[b].toLowerCase().substr(1);w.put(c,String.fromCharCode(b))}}(),Object.freeze?(a.encoder=Object.freeze(a.encoder),a.fn.encode=Object.freeze(a.fn.encode)):Object.seal?(a.encoder=Object.seal(a.encoder),a.fn.encode=Object.seal(a.fn.encode)):Object.preventExtensions&&(a.encoder=Object.preventExtensions(a.encoder),a.fn.encode=Object.preventExtensions(a.fn.encode))}(jQuery);